window.PLOTLYENV=window.PLOTLYENV || {};
                    
                if (document.getElementById("2ba1cfc1-b6e1-4cf5-9741-2e67c5a3bf22")) {
                    Plotly.newPlot(
                        '2ba1cfc1-b6e1-4cf5-9741-2e67c5a3bf22',
                        data=[
                            {"customdata": [["Someday the Coronavirus may get me, but the law never will... #Trump2020CampaignSloganspic.twitter.com/kP1ST2tAV9"]], 
                            "hoverlabel": {"namelength": 0}, "hovertemplate": "Cluster=3<br>X=%{x}<br>Y=%{y}<br>Tweet=%{customdata[0]}", "legendgroup": "3", "marker": {"color": "#636efa", "symbol": "circle"}, "mode": "markers", "name": "3", "showlegend": true, "type": "scatter", "x": [-0.4626574218273163], "xaxis": "x", "y": [-0.2041572481393814], "yaxis": "y"}, 
                            {"customdata": [["The President is making a major health care crisis worse. He must be sidelined and refrain from saying anything further about #coronavirus a"], ["It's important to know: the risk to the American public of contacting the Coronavirus remains low. pic.twitter.com/aekA1vThSV"]], "hoverlabel": {"namelength": 0}, "hovertemplate": "Cluster=25<br>X=%{x}<br>Y=%{y}<br>Tweet=%{customdata[0]}", "legendgroup": "25", "marker": {"color": "#EF553B", "symbol": "circle"}, "mode": "markers", "name": "25", "showlegend": true, "type": "scatter", "x": [-0.122783362865448, -0.39789479970932007], "xaxis": "x", "y": [-0.08471620082855225, 0.23485364019870758], "yaxis": "y"}, 
                            {"customdata": [["There are many Americans aboard the Grand Princess cruise ship quarantined off the coast of San Francisco. Knowing how the coronavirus sprea"]], "hoverlabel": {"namelength": 0}, "hovertemplate": "Cluster=21<br>X=%{x}<br>Y=%{y}<br>Tweet=%{customdata[0]}", "legendgroup": "21", "marker": {"color": "#00cc96", "symbol": "circle"}, "mode": "markers", "name": "21", "showlegend": true, "type": "scatter", "x": [0.30778968334198], "xaxis": "x", "y": [0.058889903128147125], "yaxis": "y"}, 
                            {"customdata": [["Passengers on the #GrandPrincess are furious they learned from VP Mike Pence instead of the captain that 21 people on board tested positive "]], "hoverlabel": {"namelength": 0}, "hovertemplate": "Cluster=13<br>X=%{x}<br>Y=%{y}<br>Tweet=%{customdata[0]}", "legendgroup": "13", "marker": {"color": "#ab63fa", "symbol": "circle"}, "mode": "markers", "name": "13", "showlegend": true, "type": "scatter", "x": [0.17021645605564117], "xaxis": "x", "y": [-0.16624805331230164], "yaxis": "y"}
                        ],

                        {"legend": {"title": {"text": "Cluster"}, "tracegroupgap": 0}, "margin": {"t": 60}, "template": {"data": {"bar": [{"error_x": {"color": "#2a3f5f"}, "error_y": {"color": "#2a3f5f"}, "marker": {"line": {"color": "#E5ECF6", "width": 0.5}}, "type": "bar"}], "barpolar": [{"marker": {"line": {"color": "#E5ECF6", "width": 0.5}}, "type": "barpolar"}], "carpet": [{"aaxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "baxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "type": "carpet"}], "choropleth": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "choropleth"}], "contour": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "contour"}], "contourcarpet": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "contourcarpet"}], "heatmap": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "heatmap"}], "heatmapgl": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "heatmapgl"}], "histogram": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "histogram"}], "histogram2d": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "histogram2d"}], "histogram2dcontour": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "histogram2dcontour"}], "mesh3d": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "mesh3d"}], "parcoords": [{"line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "parcoords"}], "pie": [{"automargin": true, "type": "pie"}], "scatter": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatter"}], "scatter3d": [{"line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatter3d"}], "scattercarpet": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattercarpet"}], "scattergeo": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattergeo"}], "scattergl": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattergl"}], "scattermapbox": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattermapbox"}], "scatterpolar": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterpolar"}], "scatterpolargl": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterpolargl"}], "scatterternary": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterternary"}], "surface": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "surface"}], "table": [{"cells": {"fill": {"color": "#EBF0F8"}, "line": {"color": "white"}}, "header": {"fill": {"color": "#C8D4E3"}, "line": {"color": "white"}}, "type": "table"}]}, "layout": {"annotationdefaults": {"arrowcolor": "#2a3f5f", "arrowhead": 0, "arrowwidth": 1}, "coloraxis": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "colorscale": {"diverging": [[0, "#8e0152"], [0.1, "#c51b7d"], [0.2, "#de77ae"], [0.3, "#f1b6da"], [0.4, "#fde0ef"], [0.5, "#f7f7f7"], [0.6, "#e6f5d0"], [0.7, "#b8e186"], [0.8, "#7fbc41"], [0.9, "#4d9221"], [1, "#276419"]], "sequential": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "sequentialminus": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}, "colorway": ["#636efa", "#EF553B", "#00cc96", "#ab63fa", "#FFA15A", "#19d3f3", "#FF6692", "#B6E880", "#FF97FF", "#FECB52"], "font": {"color": "#2a3f5f"}, "geo": {"bgcolor": "white", "lakecolor": "white", "landcolor": "#E5ECF6", "showlakes": true, "showland": true, "subunitcolor": "white"}, "hoverlabel": {"align": "left"}, "hovermode": "closest", "mapbox": {"style": "light"}, "paper_bgcolor": "white", "plot_bgcolor": "#E5ECF6", "polar": {"angularaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "bgcolor": "#E5ECF6", "radialaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "scene": {"xaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}, "yaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}, "zaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}}, "shapedefaults": {"line": {"color": "#2a3f5f"}}, "ternary": {"aaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "baxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "bgcolor": "#E5ECF6", "caxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "title": {"x": 0.05}, "xaxis": {"automargin": true, "gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "zerolinewidth": 2}, "yaxis": {"automargin": true, "gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "zerolinewidth": 2}}}, "xaxis": {"anchor": "y", "domain": [0.0, 1.0], "title": {"text": "X"}}, "yaxis": {"anchor": "x", "domain": [0.0, 1.0], "title": {"text": "Y"}}},
                        {"responsive": true}
                    )

                };

                // var myPlot = document.getElementById('2ba1cfc1-b6e1-4cf5-9741-2e67c5a3bf22')
                //     myPlot.on('plotly_legendclick', function(clickdata){

                //         // alert("ok");
                //         var clustername = data[clickdata.curveNumber]['name'] 
                //         // trace_name = data[c]['name'] //figure['data'][curve_number]['name']
                         
                //         var textblock = ""
                //         if (clustername == '3'){
                //             textblock = showData();

        
                //         }
                //         else if (clustername == '21'){
                //             var cars = ["BMW", "Volvo", "Saab", "Ford", "Fiat", "Audi"];
                //             var scores = [0.3, 0.4, 0.5, 0.6, 0.7, 0.8]
                //             textblock = get_table_format(clustername, cars, scores)
                //         }
                        
                //         document.getElementById("worddistribution").innerHTML = 'Cluster:' + clustername + textblock
            

                //     });
                
                // function showData(){
                //     var str;
                //     str = "<br/><br/>Top words in cluster:"
                //     str += "<table><tr><th>Word</th><th>TF-IDF</th></tr>"
                //     str += "<tr><td>patient</td><td>0.385</td></tr> </table>"
                //     return str;

                // };

                // function get_table_format(clustername, wordlist, tfidf){              
                //     var str;
                //     str = "<br/><br/>Top words in cluster:" + clustername;
                //     str += "<table><tr><th>Word</th><th>TF-IDF</th></tr>";
                //     var i;
                //     for (i = 0; i < wordlist.length; i++) {
                //         str += "<tr><td>" + wordlist[i] + "</td><td>" + tfidf[i] + "</td></tr>";
                //     }
                //     str += "</table>";
                //     // alert(str);
                //     return str;
                // };

                var myPlot = document.getElementById('2ba1cfc1-b6e1-4cf5-9741-2e67c5a3bf22')
                    myPlot.on('plotly_legendclick', function(clickdata){

                        // alert("ok");
                        var clustername = data[clickdata.curveNumber]['name'] 
                         
                        var textblock = showData(clustername)
                        document.getElementById("worddistribution").innerHTML = textblock

                });

                function showData(clustername){
                    // generated by python script (switch case)
                    var wordlist, tfidf;
                    switch (clustername) {
                        case '0':
                            wordlist = ['new','york','ny','florida','hit','case','citi','california','houston','state','oregon','washington']
                            tfidf = [0.55,0.38,0.29,0.22,0.16,0.15,0.12,0.12,0.12,0.11,0.11,0.11]
                            break;
                        case '1':
                            wordlist = ['itali','counti','citi','donat','stori','ku','world','case','hai','crisi','italian','everi']
                            tfidf = [0.31,0.11,0.11,0.1,0.1,0.09,0.09,0.09,0.08,0.08,0.08,0.08]
                            break;
                        case '2':
                            wordlist = ['health','public','offici','emerg','presid','state','respons','fund','trump','test','govern','democrat']
                            tfidf = [0.35,0.19,0.18,0.17,0.16,0.15,0.15,0.14,0.14,0.12,0.12,0.11]
                            break;
                        case '3':
                            wordlist = ['get','go','like','know','peopl','need','think','got','want','stay','say','take']
                            tfidf = [0.45,0.34,0.26,0.19,0.16,0.14,0.14,0.14,0.14,0.13,0.13,0.12]
                            break;
                        case '4':
                            wordlist = ['coronavirusupd','infect','coronavirususa','coronaviruswuhan','coronaoutbreak','virus','novelcoronavirus','flu','coronavirusfr','china','wuhan','covidー19']
                            tfidf = [0.35,0.35,0.21,0.19,0.19,0.18,0.16,0.15,0.15,0.15,0.13,0.13]
                            break;
                        case '5':
                            wordlist = ['fuck','shit','homi','im','bitch','got','joke','dick','tsek','tc','oooooohhhh','haulov']
                            tfidf = [0.91,0.19,0.09,0.07,0.07,0.06,0.06,0.06,0.05,0.05,0.05,0.05]
                            break;
                        case '6':
                            wordlist = ['case','confirm','new','first','report','total','death','break','state','counti','number','bring']
                            tfidf = [0.82,0.31,0.2,0.19,0.18,0.16,0.14,0.12,0.09,0.08,0.06,0.05]
                            break;
                        case '7':
                            wordlist = ['protect','dua','stay','fight','mwebantu','way','barber','safe','other','self','tip','tinder']
                            tfidf = [0.96,0.08,0.08,0.08,0.07,0.07,0.06,0.06,0.06,0.05,0.05,0.05]
                            break;
                        case '8':
                            wordlist = ['paper','toilet','buy','stock','store','water','hand','costco','peopl','sanit','suppli','prepar']
                            tfidf = [0.33,0.32,0.2,0.18,0.16,0.14,0.14,0.14,0.13,0.12,0.12,0.12]
                            break;
                        case '9':
                            wordlist = ['status','recoveri','recov','death','rate','confirm','readi','fema','wuhan','beeeeeeeeen','nico','brazil']
                            tfidf = [0.46,0.44,0.43,0.36,0.33,0.32,0.22,0.06,0.05,0.04,0.04,0.03]
                            break;
                        case '10':
                            wordlist = ['iran','iranian','saudi','regim','case','die','peopl','death','countri','spread','arabia','video']
                            tfidf = [0.75,0.23,0.13,0.12,0.1,0.09,0.09,0.09,0.09,0.09,0.09,0.08]
                            break;
                        case '11':
                            wordlist = ['de','el','en','que','la','para','por','del','más','es','sobr','las']
                            tfidf = [0.56,0.4,0.31,0.3,0.28,0.15,0.15,0.14,0.14,0.11,0.1,0.09]
                            break;
                        case '12':
                            wordlist = ['spread','prevent','stop','help','faster','like','germ','video','way','diseas','environ','continu']
                            tfidf = [0.93,0.19,0.08,0.08,0.06,0.05,0.04,0.04,0.04,0.04,0.04,0.04]
                            break;
                        case '13':
                            wordlist = ['test','posit','peopl','kit','cdc','lab','say','korea','south','patient','case','us']
                            tfidf = [0.88,0.25,0.11,0.08,0.07,0.06,0.06,0.06,0.06,0.06,0.06,0.06]
                            break;
                        case '14':
                            wordlist = ['trump','presid','respons','obama','say','donald','democrat','administr','blame','hoax','fals','test']
                            tfidf = [0.89,0.18,0.1,0.09,0.09,0.09,0.09,0.09,0.08,0.06,0.06,0.06]
                            break;
                        case '15':
                            wordlist = ['mask','wear','face','condom','protect','gas','surgic','man','use','healthi','care','gaetz']
                            tfidf = [0.82,0.43,0.19,0.08,0.08,0.07,0.06,0.06,0.06,0.05,0.05,0.05]
                            break;
                        case '16':
                            wordlist = ['thank','money','congratul']
                            tfidf = [0.91,0.34,0.25]
                            break;
                        case '17':
                            wordlist = ['the','today']
                            tfidf = [1.0,0.04]
                            break;
                        case '18':
                            wordlist = ['flu','wors','coronavirusupd']
                            tfidf = [0.97,0.2,0.16]
                            break;
                        case '19':
                            wordlist = ['immun','ever','drank','swam','water','pool','bathroom','kid','hose','eaten','lake','child']
                            tfidf = [0.83,0.35,0.14,0.14,0.11,0.09,0.08,0.08,0.08,0.07,0.07,0.06]
                            break;
                        case '20':
                            wordlist = ['peopl','go','day','get','one','cancel','time','due','like','us','week','year']
                            tfidf = [0.21,0.2,0.17,0.15,0.14,0.14,0.13,0.13,0.13,0.12,0.12,0.12]
                            break;
                        case '21':
                            wordlist = ['china','outbreak','south','korea','peopl','case','itali','countri','due','wuhan','travel','spread']
                            tfidf = [0.4,0.21,0.2,0.2,0.19,0.18,0.17,0.17,0.13,0.12,0.12,0.11]
                            break;
                        case '22':
                            wordlist = ['peopl','infect','case','outbreak','death','spread','flu','rate','diseas','report','health','new']
                            tfidf = [0.29,0.22,0.22,0.21,0.19,0.19,0.18,0.17,0.13,0.12,0.11,0.11]
                            break;
                        case '23':
                            wordlist = ['updat','mainten','utc','undergo','locat','suspect','awar','retweet','recov','case','dead','news']
                            tfidf = [0.62,0.38,0.34,0.28,0.22,0.2,0.19,0.19,0.19,0.18,0.16,0.05]
                            break;
                        case '24':
                            wordlist = ['hand','wash','soap','touch','spread','water','prevent','shake','use','sanit','get','face']
                            tfidf = [0.67,0.62,0.13,0.1,0.08,0.08,0.07,0.07,0.06,0.06,0.06,0.06]
                            break;
                        case '25':
                            wordlist = ['peopl','need','help','inform','us','case','work','health','take','pleas','like','say']
                            tfidf = [0.21,0.2,0.17,0.15,0.14,0.14,0.13,0.12,0.12,0.12,0.11,0.11]
                            break;
                        case '26':
                            wordlist = ['patient','vaccin','flu','cure','cough','infect','symptom','lung','get','diseas','like','fever']
                            tfidf = [0.39,0.31,0.2,0.2,0.19,0.17,0.16,0.15,0.13,0.13,0.12,0.12]
                            break;
                        case '27':
                            wordlist = ['love','worri','fuck','god','shit','like','realli','peopl','say','know','get','laugh']
                            tfidf = [0.23,0.2,0.17,0.15,0.15,0.14,0.14,0.14,0.13,0.12,0.12,0.11]
                            break;
                        case '28':
                            wordlist = ['na','gon','wan','oh','mad','omg','get','go','late','see','shit','die']
                            tfidf = [0.73,0.55,0.22,0.09,0.08,0.08,0.07,0.06,0.06,0.05,0.05,0.05]
                            break;
                    }
                    
                    var textblock = getTable(clustername, wordlist, tfidf);
                    return textblock;
                };

                function getTable(clustername, wordlist, tfidf){              
                    var str = "<br/><br/>Top words in cluster:" + clustername;
                    str += "<table><tr><th>Word</th><th>TF-IDF</th></tr>";
                    var i;
                    for (i = 0; i < wordlist.length; i++) {
                        str += "<tr><td>" + wordlist[i] + "</td><td>" + tfidf[i] + "</td></tr>";
                    }
                    str += "</table>";
                    // alert(str);
                    return str;
                };

